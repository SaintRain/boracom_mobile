{foreach  from=$fields item=field}{if $field.edittype_id!=12 && $field.edittype_id!=10}{assign var='check' value=$field.fieldname}{if isset($fieldsExportSettings.$check)}{if $field.comment!=''}{$field.comment}{else}{$field.fieldname}{/if};{/if}{/if}{/foreach}

{foreach name="data_rows" from=$needData item=item}{foreach name="fieldlist" from=$fields item=field}{if $field.edittype_id!=12 && $field.edittype_id!=10}{assign var='check' value=$field.fieldname}{if isset($fieldsExportSettings.$check)}{assign var="ind"  value=$field.fieldname}{if $field.edittype_id!=5}{if $field.datatype_id==9 || $field.datatype_id==10}{$item.$ind|make_price}{else}{if $field.edittype_id==1 || $field.edittype_id==2 || $field.edittype_id==7 || $field.edittype_id==8}{$item.$ind|strip_tags}{else}{if $field.edittype_id==3 || $field.edittype_id==6}{assign var='sourse_values' 	value="list_`$field.fieldname`"}{if $field.datatype_id!=24 && $field.datatype_id!=25}{assign var='sourse_list' 		value=$field.$sourse_values}{assign var='sourse_field_name' value=$field.sourse_field_name}{assign var='source_id' 		value="id`$item.$ind`"}{if isset($sourse_list.$source_id.$sourse_field_name)}{$sourse_list.$source_id.$sourse_field_name}{else}{$MSGTEXT.report_not_set}{/if}{else}{if $item.$ind}{$item.$ind}{else}{$MSGTEXT.report_not_set}{/if}{/if}{else}{if $field.edittype_id==4}{assign var='sourse_values' 	value="list_`$field.fieldname`"}{foreach name='foreach_multy' from=$item.$sourse_values item=m}{if $m!=''}{$m}{if !$smarty.foreach.foreach_multy.last}, {/if}{else}{$MSGTEXT.report_not_set}{/if}{/foreach}{else}{if $field.edittype_id==13}{assign var='sourse_values' 	value="list_`$field.fieldname`"}{assign var='sourse_list' 		value=$field.$sourse_values}{assign var='source_id' 		value="id`$item.$ind`"}{if isset($sourse_list.$source_id.name)}{$sourse_list.$source_id.name}-{else}{$MSGTEXT.report_not_set}{/if}{else}{if $field.edittype_id==9 || $field.edittype_id==10}{if $item.$ind}{$item.$ind}{/if}{else}{if $field.edittype_id==11 || $field.edittype_id==12}{if $item.$ind}{$item.$ind}{/if}{else}{$item.$ind}{/if}{/if}{/if}{/if}{/if}{/if}{/if}{else}{if $item.$ind==1}{$MSGTEXT.report_yes}{else}{$MSGTEXT.report_no}{/if}{/if};{/if}{/if}{/foreach}

{/foreach}